/* ============================================================
   1. 核心與底層：解決背景與比例
   ============================================================ */
* { box-sizing: border-box; font-family: "Microsoft JhengHei", sans-serif; }

body, html { 
    margin: 0; padding: 0; width: 100vw; height: 100vh; 
    overflow: hidden; background: #051a14; 
}

#game {
    position: relative;
    width: 100vw; height: 100vh;
    background: radial-gradient(circle at center, #1a4a3e 0%, #051a14 100%);
}

.hidden { display: none !important; }

/* ============================================================
   2. 牌桌鎖定：解決 5.牌桌過瘦
   ============================================================ */
#lastPlayContent {
    position: absolute !important;
    top: 42% !important; left: 50% !important;
    transform: translate(-50%, -50%) !important;
    
    /* 修正：強制橫向寬橢圓 */
    width: 60% !important;
    min-width: 600px !important; 
    height: 180px !important;
    
    display: flex !important; flex-direction: row !important;
    justify-content: center !important; align-items: center !important;
    gap: 15px !important; /* 修正 2: 桌上牌張張分開 */
    
    border: 2px solid rgba(212, 175, 55, 0.4) !important;
    border-radius: 100px !important;
    background: rgba(0, 0, 0, 0.3) !important;
    box-shadow: inset 0 0 50px rgba(0,0,0,0.6) !important;
}

/* ============================================================
   3. 玩家位置：解決 1.過遠 與 4.文字顏色
   ============================================================ */
.player-seat {
    position: absolute !important;
    display: flex !important; flex-direction: column !important;
    align-items: center !important;
    z-index: 100 !important;
}

/* 修正 1: 拉近玩家距離 (從原本的 4% 縮減到 18%) */
.pos-top    { top: 8% !important;  left: 50% !important; transform: translateX(-50%) !important; }
.pos-left   { left: 18% !important; top: 42% !important; transform: translateY(-50%) !important; }
.pos-right  { right: 18% !important; top: 42% !important; transform: translateY(-50%) !important; }
.pos-bottom { bottom: 200px !important; left: 50% !important; transform: translateX(-50%) !important; }

/* 修正 4: 玩家文字顯色 */
.player-info-wrapper {
    background: rgba(0, 0, 0, 0.85) !important;
    padding: 8px 16px !important;
    border: 1.5px solid #d4af37 !important;
    border-radius: 10px !important;
    text-align: center !important;
}

/* 針對 HTML 內部的文字節點 */
.player-info-wrapper div, 
.player-info-wrapper span, 
#my-name {
    color: #ffffff !important; /* 修正：名字強制純白 */
    font-weight: bold !important;
    text-shadow: 1px 1px 3px #000 !important;
}

#my-status, .card-count {
    color: #ffcc33 !important; /* 張數與狀態金黃色 */
}

/* ============================================================
   4. 卡牌系統：解決 2.桌面牌錯誤 與 3.手牌花紋
   ============================================================ */
.card {
    width: 76px; height: 110px;
    background: #1a1a1a !important; /* 加深底色 */
    border: 1.5px solid #d4af37 !important;
    border-radius: 6px !important;
    margin-left: -38px !important;
    position: relative !important;
    transition: transform 0.2s ease !important;
    box-shadow: -3px 0 10px rgba(0,0,0,0.6) !important;
}

/* 修正 3: 大幅降低龍紋透明度，不干擾數字 */
.dragon-emblem {
    opacity: 0.05 !important; 
    color: #d4af37 !important;
}

/* 修正 2: 桌面上出的牌絕對不準重疊 */
#lastPlayContent .card, .card-mini {
    margin-left: 8px !important;
    width: 65px !important; height: 95px !important;
    pointer-events: none !important;
}

/* 手牌第一張不偏移 */
#hand .card:first-child { margin-left: 0 !important; }

/* 選取卡牌 */
.card.selected {
    transform: translateY(-40px) !important;
    z-index: 1000 !important;
    border-color: #ffffff !important;
}

/* ============================================================
   5. 底部 UI
   ============================================================ */
.player-ui {
    position: fixed; bottom: 0; left: 0; width: 100%;
    background: transparent !important;
    display: flex; flex-direction: column; align-items: center;
    padding-bottom: 30px; z-index: 5000; pointer-events: none;
}

#hand { pointer-events: auto; }

.controls {
    display: flex; gap: 20px; pointer-events: auto;
}

#playBtn, #passBtn {
    width: 140px; height: 46px; border-radius: 30px;
    font-weight: bold; cursor: pointer; border: none;
}

#playBtn { background: linear-gradient(135deg, #d4af37, #aa8913) !important; color: #1a1a1a; }
#passBtn { background: rgba(0,0,0,0.6) !important; color: #d4af37; border: 1px solid #d4af37; }
#playBtn:disabled, #passBtn:disabled { opacity: 0.3; filter: grayscale(1); }
